<!-- 
ржЕржмрж╢рзНржпржЗ ЁЯЩВ
Laravel developer ржжрзЗрж░ржХрзЗ interviewer рж░рж╛ ржкрзНрж░рж╛рзЯржЗ **SQL / Database related ржкрзНрж░рж╢рзНржи** ржХрж░рзЗред ржирж┐ржЪрзЗ ржХрж┐ржЫрзБ **common + tricky SQL interview questions** ржжрж┐рж▓рж╛ржо (basic ржерзЗржХрзЗ advanced ржкрж░рзНржпржирзНржд):

---

## ЁЯФ╣ Basic SQL Questions

1. **What is the difference between `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN` and `FULL OUTER JOIN`?**
2. **What is the difference between `WHERE` and `HAVING`?**
3. **What is the difference between `CHAR` and `VARCHAR`?**
4. **What are `PRIMARY KEY`, `FOREIGN KEY`, `UNIQUE`, and `INDEX`?**
5. **What is the difference between `DELETE`, `TRUNCATE`, and `DROP`?**
6. **How does `LIMIT` and `OFFSET` work in SQL?**
7. **What is the difference between `COUNT(*)`, `COUNT(column)`, and `COUNT(DISTINCT column)`?**

---

## ЁЯФ╣ Query Writing Questions

8. Write an SQL query to get the **second highest salary** from an `employees` table.
9. Write a query to fetch **duplicate records** in a table.
10. Write a query to fetch **all users who donтАЩt have any orders**.
11. Write a query to **join three tables** (e.g., `users`, `orders`, `payments`).
12. Write an SQL query to **find employees who joined in the last 30 days**.

---

## ЁЯФ╣ Intermediate Concepts

13. What is the difference between `Clustered Index` and `Non-Clustered Index`?
14. How does **Normalization** work (1NF, 2NF, 3NF)?
15. What is **Denormalization**? When would you use it?
16. What is the difference between **transactional database** vs **analytical database**?
17. Explain **ACID properties** of a database.
18. What are **stored procedures, functions, and triggers**?

---

## ЁЯФ╣ Performance & Optimization

19. How do you **optimize a slow query**?
20. What is the **EXPLAIN** keyword used for?
21. What is a **composite index** and when should you use it?
22. How do you prevent **N+1 query problems** in SQL or Laravel?
23. WhatтАЩs the difference between **horizontal partitioning (sharding)** and **vertical partitioning**?

---

## ЁЯФ╣ Advanced / Scenario-Based

24. How would you design a database for a **multi-tenant SaaS application**?
25. How do you implement **soft deletes** in SQL (like LaravelтАЩs `softDeletes`)?
26. How do you ensure **data consistency** during a payment transaction?
27. What is a **deadlock** in SQL, and how can you prevent it?
28. How do you handle **large-scale data migrations** in production?
29. What is the difference between **SQL Injection** and **Prepared Statements**?
30. How do you use **CTE (Common Table Expressions)** in SQL?

---

ЁЯСЙ ржПржЧрзБрж▓рж╛ ржерзЗржХрзЗ interviewer рждрзЛржорж╛рж░ **basic concepts, problem-solving ability, query writing skill, ржПржмржВ optimization knowledge** ржЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред

 -->


# тЬЕ Short Note : SQL Interview Q\&A with Examples

## ЁЯФ╣ Basic SQL Questions

**Q1. Difference between `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN`, `FULL OUTER JOIN`?**

* **INNER JOIN** тЖТ Returns rows when there is a match in both tables.
* **LEFT JOIN** тЖТ Returns all rows from left table, matched rows from right table.
* **RIGHT JOIN** тЖТ Returns all rows from right table, matched rows from left.
* **FULL OUTER JOIN** тЖТ Returns all rows when there is a match in either left or right.

```sql
SELECT users.id, orders.id
FROM users
INNER JOIN orders ON users.id = orders.user_id;
```

---

**Q2. Difference between `WHERE` and `HAVING`?**

* `WHERE` тЖТ Filters rows **before** grouping.
* `HAVING` тЖТ Filters rows **after** grouping (works with aggregate functions).

```sql
SELECT department, COUNT(*)
FROM employees
WHERE salary > 50000
GROUP BY department
HAVING COUNT(*) > 10;
```

---

**Q3. Difference between `CHAR` and `VARCHAR`?**

* `CHAR(n)` тЖТ Fixed length, always uses `n` bytes (faster).
* `VARCHAR(n)` тЖТ Variable length, uses actual string length (space saving).

---

**Q4. `PRIMARY KEY`, `FOREIGN KEY`, `UNIQUE`, `INDEX`**

* **PRIMARY KEY** тЖТ Unique + Not Null (identifies row).
* **FOREIGN KEY** тЖТ References another tableтАЩs column.
* **UNIQUE** тЖТ Prevents duplicate values.
* **INDEX** тЖТ Speeds up search queries.

---

**Q5. Difference between `DELETE`, `TRUNCATE`, `DROP`**

* `DELETE` тЖТ Removes rows (can rollback).
* `TRUNCATE` тЖТ Removes all rows (faster, no rollback).
* `DROP` тЖТ Deletes table structure.

---

**Q6. `LIMIT` and `OFFSET`**

```sql
SELECT * FROM employees LIMIT 10 OFFSET 20;
-- Skips 20 rows, shows next 10
```

---

**Q7. Difference between `COUNT(*)`, `COUNT(column)`, `COUNT(DISTINCT column)`**

* `COUNT(*)` тЖТ Counts all rows.
* `COUNT(column)` тЖТ Counts non-null rows in column.
* `COUNT(DISTINCT column)` тЖТ Counts unique non-null values.

---



## ЁЯФ╣ Intermediate Concepts

**Q8. Clustered vs Non-Clustered Index**

* **Clustered** тЖТ Physically sorts data (1 per table).
* **Non-Clustered** тЖТ Separate index structure, multiple allowed.

---

**Q9. Normalization (1NF, 2NF, 3NF)**

* 1NF тЖТ No repeating groups, atomic values.
* 2NF тЖТ Must be in 1NF + full dependency on primary key.
* 3NF тЖТ Must be in 2NF + no transitive dependency.

---

**Q10. Denormalization**

* Opposite of normalization.
* Adds redundancy to improve read performance.

---

**Q11. Transactional vs Analytical DB**

* **Transactional (OLTP)** тЖТ Day-to-day operations (MySQL, PostgreSQL).
* **Analytical (OLAP)** тЖТ Reporting, BI, aggregations (Redshift, BigQuery).

---

**Q12. ACID Properties**

* **Atomicity** тЖТ All or nothing.
* **Consistency** тЖТ Valid state always maintained.
* **Isolation** тЖТ Transactions donтАЩt affect each other.
* **Durability** тЖТ Data persists after commit.

---

**Q13. Stored Procedure, Function, Trigger**

* **Procedure** тЖТ Predefined SQL block, can do multiple actions.
* **Function** тЖТ Returns a single value, used in queries.
* **Trigger** тЖТ Auto-executed on INSERT/UPDATE/DELETE.

---

## ЁЯФ╣ Performance & Optimization

**Q14. Optimize a slow query**

* Use indexes
* Avoid `SELECT *`
* Use `EXPLAIN`
* Denormalize if needed
* Use caching (Redis, Laravel cache)

---

**Q15. `EXPLAIN`**

* Shows query execution plan.

```sql
EXPLAIN SELECT * FROM users WHERE email='abc@test.com';
```

---

**Q16. Composite Index**

* Index on multiple columns.
* Example: `(first_name, last_name)`

---

**Q17. Prevent N+1 problem**

* Use `JOIN` or **Eager Loading** in Laravel (`with()`).

---

**Q18. Horizontal vs Vertical Partitioning**

* **Horizontal** тЖТ Split rows into multiple tables (sharding).
* **Vertical** тЖТ Split columns into multiple tables.

---

## ЁЯФ╣ Advanced / Scenario-Based

**Q19. Multi-tenant SaaS DB**

* **Option 1:** Shared DB, tenant\_id in tables.
* **Option 2:** Separate DB per tenant.
* **Option 3:** Hybrid.

---

**Q20. Soft Deletes in SQL**

```sql
ALTER TABLE users ADD deleted_at DATETIME NULL;
-- Laravel handles automatically with SoftDeletes trait
```

---

**Q21. Ensure consistency in payments**

* Use `DB::transaction()` in Laravel.
* Rollback on failure.

---

**Q22. Deadlock**

* When two transactions wait for each otherтАЩs lock.
* Prevent by consistent locking order, smaller transactions.

---

**Q23. Large-scale migrations**

* Use **zero downtime migrations**.
* Break into smaller steps.
* Run during low-traffic.

---

**Q24. SQL Injection vs Prepared Statements**

* SQL Injection тЖТ Inserting malicious queries.
* Prepared Statements тЖТ Precompiled queries, safe.

---

**Q25. CTE Example**

```sql
WITH RecentOrders AS (
   SELECT * FROM orders WHERE order_date >= NOW() - INTERVAL 30 DAY
)
SELECT * FROM RecentOrders WHERE amount > 500;
```

---


<br>


# ЁЯдФ Indexing ржХрзА ржПржмржВ ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ ? `(BrainStation)`

ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ `index` рж╣рж▓рзЛ ржмржЗрзЯрзЗрж░ рж╕рзВржЪрзАржкрждрзНрж░рзЗрж░ ржорждрзЛред
ржпржЦржи ржЖржорж░рж╛ ржХрзЛржирзЛ ржХрж▓рж╛ржо (ржпрзЗржоржи: `email`, `phone`, `id`) ржП index ржХрж░рж┐, рждржЦржи ржбрж╛ржЯрж╛ржмрзЗржЬ рж╕рзЗржЗ ржХрж▓рж╛ржо ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рждрзЗ ржЕржирзЗржХ ржжрзНрж░рзБржд рж╣рзЯрзЗ ржпрж╛рзЯред

ЁЯСЙ ржорж╛ржирзЗ, ржпржжрж┐ ржХрзЛржЯрж┐ ржХрзЛржЯрж┐ row ржерж╛ржХрзЗ, index ржЫрж╛рзЬрж╛ search ржХрж░рждрзЗ рж╣рж▓рзЗ ржкрзНрж░рждрж┐ржЯрж┐ row рж╕рзНржХрзНржпрж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ (Full Table Scan)ред
ржХрж┐ржирзНрждрзБ index ржерж╛ржХрж▓рзЗ, ржбрж╛ржЯрж╛ржмрзЗржЬ рж╕рж░рж╛рж╕рж░рж┐ рж╕рзВржЪрзАржкрждрзНрж░ ржжрзЗржЦрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржбрзЗржЯрж╛ ржПржирзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред

---

## тЬЕ **Indexing ржПрж░ Merits (рж╕рзБржмрж┐ржзрж╛):**

1. **Search ржжрзНрж░рзБржд рж╣рзЯ**

   * Query execution ржЕржирзЗржХ ржжрзНрж░рзБржд рж╣рзЯред
   * ржпрзЗржоржи: `SELECT * FROM users WHERE email = 'abc@test.com'` тЖТ index ржерж╛ржХрж▓рзЗ ржорж┐рж▓рж┐рж╕рзЗржХрзЗржирзНржбрзЗ result ржЖрж╕ржмрзЗред

2. **Sorting/Ordering ржжрзНрж░рзБржд рж╣рзЯ**

   * `ORDER BY`, `GROUP BY` ржПрж░ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрж╛рзЬрж╛рзЯред

3. **Unique Constraint ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ**

   * `UNIQUE INDEX` ржжрж┐рж▓рзЗ duplicate ржбрзЗржЯрж╛ insert рж╣ржУрзЯрж╛ рж░рзЛржз рж╣рзЯред

4. **Joins ржжрзНрж░рзБржд рж╣рзЯ**

   * ржмрзЬ ржЯрзЗржмрж┐рж▓ join ржХрж░рж╛рж░ рж╕ржорзЯ indexed column ржерж╛ржХрж▓рзЗ speed ржмрзЗрзЬрзЗ ржпрж╛рзЯред

---

## тЭМ **Indexing ржПрж░ Demerits (ржЕрж╕рзБржмрж┐ржзрж╛):**

1. **Storage ржмрзЗрж╢рж┐ рж▓рж╛ржЧрзЗ**

   * ржкрзНрж░рждрж┐ржЯрж┐ index ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ disk space ржирзЗрзЯред
   * ржЯрзЗржмрж┐рж▓рзЗ ржпржд ржмрзЗрж╢рж┐ index, storage рждржд ржмрзЗрж╢рж┐ ржЦрж░ржЪред

2. **Insert/Update/Delete ржзрзАрж░ рж╣рзЯ**

   * ржирждрзБржи data insert ржХрж░рж▓рзЗ ржмрж╛ update ржХрж░рж▓рзЗ index ржУ update ржХрж░рждрзЗ рж╣рзЯред
   * ржлрж▓рзЗ write operations (insert, update, delete) ржХрж┐ржЫрзБржЯрж╛ slow рж╣рзЯрзЗ ржпрж╛рзЯред

3. **ржЕрждрж┐рж░рж┐ржХрзНржд Index ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржирж╖рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ**

   * ржмрзЗрж╢рж┐ index рждрзИрж░рж┐ ржХрж░рж▓рзЗ Query Optimizer ржмрж┐ржнрзНрж░рж╛ржирзНржд рж╣рждрзЗ ржкрж╛рж░рзЗред

---

## ЁЯОп рж╕ржВржХрзНрж╖рзЗржкрзЗ:

* **Index ржжрж░ржХрж╛рж░** ржпржЦржи read/query operations ржмрзЗрж╢рж┐ рж╣ржмрзЗ (read-heavy systems)ред
* **Index ржирж╛ ржмрж╛ржирж╛ржирзЛ ржнрж╛рж▓рзЛ** ржпржЦржи system write-heavy (ржЕрж░рзНржерж╛рзО ржмрж╛рж░ржмрж╛рж░ insert/update/delete рж╣рзЯ)ред

---

ЁЯСЙ Interview ржП ржПржоржиржнрж╛ржмрзЗ ржмрж▓рждрзЗ ржкрж╛рж░рзЛ:

> "Indexing ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржбрзЗржЯрж╛ search, sort ржПржмржВ join ржжрзНрж░рзБржд рж╣рзЯред рждржмрзЗ index рждрзИрж░рж┐ ржХрж░рж▓рзЗ extra storage рж▓рж╛ржЧрзЗ ржПржмржВ insert/update/delete ржзрзАрж░ рж╣рзЯрзЗ ржпрж╛рзЯред рждрж╛ржЗ index smartly ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯред"

---



# ЁЯдФ Problem Solving  


**Q-1 : Second highest salary**

```sql
SELECT MAX(salary) 
FROM employees 
WHERE salary < (SELECT MAX(salary) FROM employees);
```

**Q-2 : Third highest salary**

* LIMIT + OFFSET

```sql
SELECT DISTINCT salary
FROM employees
ORDER BY salary DESC
LIMIT 1 OFFSET 2;
```

* Using Subquery with MAX()

```sql
SELECT MAX(salary) AS third_highest
FROM employees
WHERE salary < (
    SELECT MAX(salary)
    FROM employees
    WHERE salary < (
        SELECT MAX(salary) FROM employees
    )
);
```

---

**Q-3 : Find duplicates**

```sql
SELECT email, COUNT(*) 
FROM users 
GROUP BY email 
HAVING COUNT(*) > 1;
```

---

**Q-4 : Users without orders**

```sql
SELECT users.id, users.name 
FROM users
LEFT JOIN orders ON users.id = orders.user_id
WHERE orders.id IS NULL;
```

---

**Q-5 : Join three tables**

```sql
SELECT 
    users.name, 
    orders.id AS order_id, 
    payments.amount
FROM users
JOIN orders ON users.id = orders.user_id
JOIN payments ON orders.id = payments.order_id;
```

**Q-6 : Calculate the total revenue per product**
<!-- 4 No -->

```sql
SELECT 
    product_id,
    SUM(quantity * price_per_unit) AS total_revenue
FROM orders
GROUP BY product_id;
```

**Q-6 : Get the top 3 highest-paid employess**
<!-- 5 No -->

```sql
SELECT name, salary
FROM employees
ORDER BY salary DESC
LIMIT 3;
```

**Q-7 : Show the count of orders per customer**
<!-- 5 No -->

```sql
SELECT 
    customer_id,
    COUNT(*) AS total_orders
FROM orders
GROUP BY customer_id;

```

**Q-8 : Retrive all employess who joined in 2023**
<!-- 8 No -->

```sql
SELECT *
FROM Employee
WHERE YEAR(hire_date) = 2023
```

**Q-9 : Get the latest order placed by each customer**
<!-- 10 No -->

```sql
SELECT customer_id, MAX(order_date) AS latest_order_date
FROM Orders
GROUP BY customer_id;
```

**Q-10 : Identify the most selling products**
<!-- 12 No -->

```sql
SELECT TOP 1 product_id, SUM(quantity) AS total_qty
FROM Sales
GROUP BY product_id
ORDER BY total_qty DESC;
```

**Q-11 : Get tje tpa; revemue and the number of orders per region**
<!-- 13 No -->

```sql
SELECT region, SUM(totla_amount) AS total_revenue, COUNT(*) AS order_count
FROM Orders
GROUP BY region;
```

**Q-12 : Count how many customers placed more than 5 orders**
<!-- 14 No -->

```sql
SELECT COUNT(*) AS customer_count
FROM (
    SELECT customer_id FROM orders
    GROUP BY customer_id
    HAVING COUNT(*) > 5
) AS subquery;
```

**Q-13 : Find all employess hired on weekend**
<!-- 16 No -->

```sql
SELECT * 
FROM Employee
WHERE DATENAME(WEEKDAY, hire_date)
IN ('Saterday', 'Sunday');
```

**Q-14 : Identify the first and last order date for each customer**
<!-- 22 No -->

```sql
SELECT customer_id,
MIN(order_date) AS first_order,
MAX(order_date) AS last_order
FROM Orders
GROUP BY customer_id;
```

**Q-15 : Identify top-performing departments by average salary**
<!-- 22 No -->

```sql
SELECT 
    department_id,
    AVG(salary) AS avg_salary
FROM Employee
GROUP BY department_id
ORDER BY avg_salary DESC;
```

**Q-16 : Retrive the maximum salary differnce within each department**
<!-- 31 No -->

```sql
SELECT 
    department_id
    MAX(salary) - MIN(salary) AS salary_diff
FROM Employee
GROUP BY department_id;
```

**Q-17 : Find employees with salary higher than department average**
<!-- 47 No -->

```sql
WITH dept_avg AS (
        SELECT department_id, AVG(salary) AS avg_salary
        FROM Employee
        GROUP BY department_id
    )
SELECT emp.* FROM Employee e 
JOIN dept_avg d ON emp.department_id = d.department_id
WHERE e.salary > d.avg_salary;
```
---

<br>

# ЁЯдФ Query Performance  ? `(BrainStation)`

Ans : Goto the : [Better Performance on a Project](https://docs.google.com/document/d/1Jd28m3Twc8H-0FwgGjID1Ptz1ZnjLyLjvw4MIEpPmdc/edit?tab=t.0) 


# ЁЯдФ What is Trigger  ? `(Business Automation)`

## ЁЯУМ Trigger ржХрзА?

Trigger рж╣рж▓рзЛ ржПржХржЯрж┐ **database object**, ржпрзЗржЯрж╛ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ (automatically) ржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░рзЗ ржлрзЗрж▓рзЗ ржпржЦржи ржХрзЛржирзЛ event ржШржЯрзЗ ржпрзЗржоржиржГ

* **INSERT** (ржирждрзБржи ржбрж╛ржЯрж╛ ржЗржирж╕рж╛рж░рзНржЯ рж╣рж▓рзЗ)
* **UPDATE** (ржбрж╛ржЯрж╛ ржЖржкржбрзЗржЯ рж╣рж▓рзЗ)
* **DELETE** (ржбрж╛ржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣рж▓рзЗ)

ЁЯСЙ ржЕрж░рзНржерж╛рзО Trigger ржорж╛ржирзЗ рж╣рж▓рзЛ **ржПржХ рж╕рзЗржЯ SQL statement**, ржпрзЗржЯрж╛ ржкрзНрж░рждрж┐ ржмрж╛рж░ ржХрзЛржирзЛ row insert, update ржмрж╛ delete рж╣рж▓рзЗ execute рж╣рзЯред

---

## тЪЩя╕П How Triggers Work (ржХрж╛ржЬ ржХрж░рж╛рж░ ржирж┐рзЯржо)

1. **Triggered Automatically** тАУ ржХрзЛржирзЛ event ржШржЯрж▓рзЗ (ржпрзЗржоржи insert) trigger execute рж╣рзЯред
2. **Attached to a Table** тАУ ржкрзНрж░рждрж┐ржЯрж┐ trigger ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ table ржПржмржВ action ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХрзЗред

---

## ЁЯУЭ Types of Triggers

1. **Before Trigger** тАУ ржорзВрж▓ ржХрж╛ржЬ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ execute рж╣рзЯ (ржпрзЗржоржи ржбрж╛ржЯрж╛ insert рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ)ред
2. **After Trigger** тАУ ржорзВрж▓ ржХрж╛ржЬ рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ execute рж╣рзЯ (ржпрзЗржоржи ржХрзЛржирзЛ row update рж╣ржУрзЯрж╛рж░ ржкрж░)ред

---

## ЁЯОп Why Use Triggers?

* **Automatic Logging** тЖТ ржбрж╛ржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ рж▓ржЧ ржЕржЯрзЛ рждрзИрж░рж┐ рж╣рзЯред
* **Data Validation** тЖТ Business rules enforce ржХрж░рж╛ ржпрж╛рзЯред
* **Cascade Operations** тЖТ Related ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛ consistent рж░рж╛ржЦрж╛ ржпрж╛рзЯред

---

## ЁЯЦея╕П Example 1: (MySQL Trigger)

ржПржХржЯрж┐ Trigger ржпрзЗржЯрж╛ ржирждрзБржи user insert рж╣рж▓рзЗ рж▓ржЧ рж░рж╛ржЦрзЗ:

```sql
CREATE TRIGGER log_insert
AFTER INSERT ON users
FOR EACH ROW
INSERT INTO logs (message)
VALUES (CONCAT('New user added: ', NEW.name));
```

---

## тЪб Some Points to Remember

i) ржПржХржЯрж┐ Trigger рждрж╛рж░ ржирж┐ржЬрзЗрж░ table-ржП update ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред
ii) Circular ржнрж╛ржмрзЗ Trigger define ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред
iii) Multiple Trigger ржерж╛ржХрж▓рзЗ default order ржЕржирзБржпрж╛рзЯрзА execute рж╣рзЯред
iv) Execution order `FOLLOWS` ржмрж╛ `PRECEDES` ржжрж┐рзЯрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛рзЯред
v) Triggers replica server-ржП fire рж╣рзЯ ржирж╛ (рждржмрзЗ data replication рж╣рждрзЗ ржкрж╛рж░рзЗ)ред

---

## ЁЯЦея╕П Example 2: (MySQL Trigger with Laravel)

### **Step 1: MySQL Trigger Create ржХрж░рж╛**

```sql
DELIMITER $$

CREATE TRIGGER after_user_delete
AFTER DELETE ON users
FOR EACH ROW
BEGIN
	INSERT INTO backups (name, email)
	VALUES (OLD.name, OLD.email);
END$$

DELIMITER ;
```

### **Explanation:**

* **AFTER DELETE** тЖТ Trigger `users` ржЯрзЗржмрж┐рж▓рзЗ ржХрзЛржирзЛ row delete рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ ржЪрж╛рж▓рзБ рж╣ржмрзЗред
* **OLD** тЖТ delete рж╣ржУрзЯрж╛ row ржПрж░ ржЖржЧрзЗрж░ value access ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред
* INSERT ржХрж░рзЗ `backups` ржЯрзЗржмрж┐рж▓рзЗ рж╕рзЗржЗ user ржПрж░ name, email рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред

---

### **Step 2: Laravel Code Example**

```php
use Illuminate\Support\Facades\DB;

// Delete a user by ID (Trigger рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ backups ржЯрзЗржмрж┐рж▓рзЗ ржбрж╛ржЯрж╛ insert ржХрж░ржмрзЗ)
DB::table('users')
	->where('id', $userId)
	->delete();

// Check backups ржЯрзЗржмрж┐рж▓рзЗ ржбрж╛ржЯрж╛ insert рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛
$backups = DB::table('backups')->get();

foreach ($backups as $backup) {
	echo "Backup ID: {$backup->id}, Name: {$backup->name}, Email: {$backup->email}";
}
```

ЁЯСЙ ржПржЦрж╛ржирзЗ Laravel ржХрзЗржмрж▓ delete ржХрж░ржЫрзЗред ржХрж┐ржирзНрждрзБ trigger ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗ delete рж╣ржУрзЯрж╛ user ржПрж░ ржбрж╛ржЯрж╛ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ `backups` ржЯрзЗржмрж┐рж▓рзЗ ржЪрж▓рзЗ ржЧрзЗржЫрзЗред

---

## ЁЯПЖ Summary

* Trigger рж╣рж▓рзЛ Database ржПрж░ automation toolред
* Insert/Update/Delete event ржШржЯрж▓рзЗржЗ trigger ржЕржЯрзЛ ржХрж┐ржЫрзБ action ржХрж░рзЗред
* Real-life use cases: **Audit Log, Backup, Data Validation, Cascade Update/Delete**ред


<br>

# ЁЯдФ What is Store Procedure `(Prime tech)`


## ЁЯУМ Stored Procedure ржХрзА?

**Stored Procedure** рж╣рж▓рзЛ **precompiled SQL statements ржПрж░ ржПржХржЯрж╛ collection**, ржпрзЗржЯрж╛ database ржПрж░ ржнрзЗрждрж░рзЗ save ржерж╛ржХрзЗ ржПржмржВ ржПржХржмрж╛рж░ define ржХрж░рж▓рзЗ ржмрж╛рж░ржмрж╛рж░ call ржХрж░рж╛ ржпрж╛рзЯред

ЁЯСЙ рж╕рж╣ржЬржнрж╛ржмрзЗ: Stored Procedure ржорж╛ржирзЗ рж╣рж▓рзЛ **ржПржХржЯрж╛ function-ржПрж░ ржорждрзЛ code block**, ржпрзЗржЯрж╛ SQL server ржПрж░ ржнрзЗрждрж░рзЗржЗ execute рж╣рзЯред

---

## тЪЩя╕П Stored Procedure ржПрж░ ржХрж╛ржЬрзЗрж░ ржирж┐рзЯржо

* Database ржПрж░ ржнрзЗрждрж░рзЗржЗ store рж╣рзЯред
* Client (ржпрзЗржоржи Laravel ржмрж╛ ржЕржирзНржп app) ржерзЗржХрзЗ рж╢рзБржзрзБ call ржХрж░рж▓рзЗржЗ execute рж╣рзЯред
* ржПржХржмрж╛рж░ compile рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ performance ржнрж╛рж▓рзЛ рж╣рзЯред

---

## ЁЯОп Why Use Stored Procedure? (ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ?)

1. **Code Reusability** тЖТ ржПржХржЗ ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржХрж░рждрзЗ рж╣рж▓рзЗ ржПржХржмрж╛рж░ рж▓рж┐ржЦрж▓рзЗржЗ рж╣ржмрзЗред
2. **Performance** тЖТ Precompiled ржмрж▓рзЗ ржжрзНрж░рзБржд execute рж╣рзЯред
3. **Security** тЖТ Direct query ржирж╛ рж▓рж┐ржЦрзЗ procedure call ржХрж░рж▓рзЗ SQL Injection ржПрж░ ржЭрзБржБржХрж┐ ржХржорзЗред
4. **Maintainability** тЖТ Logic centralize ржерж╛ржХрзЗ, рж╕рж╣ржЬрзЗ update ржХрж░рж╛ ржпрж╛рзЯред
5. **Transaction Control** тЖТ ржПржХрж╛ржзрж┐ржХ query ржПржХрж╕рж╛ржерзЗ execute ржУ rollback/commit ржХрж░рж╛ ржпрж╛рзЯред

---

## ЁЯЦея╕П Example 1: Simple Stored Procedure (MySQL)

```sql
DELIMITER $$

CREATE PROCEDURE GetAllUsers()
BEGIN
    SELECT * FROM users;
END$$

DELIMITER ;
```

ЁЯСЙ ржПржЦрж╛ржирзЗ `GetAllUsers` ржирж╛ржорзЗ ржПржХржЯрж╛ stored procedure рждрзИрж░рж┐ рж╣рж▓рзЛред

Call ржХрж░рж╛рж░ рж╕ржорзЯ:

```sql
CALL GetAllUsers();
```

---

## ЁЯЦея╕П Example 2: Stored Procedure with Parameter

```sql
DELIMITER $$

CREATE PROCEDURE GetUserByEmail(IN userEmail VARCHAR(100))
BEGIN
    SELECT * FROM users WHERE email = userEmail;
END$$

DELIMITER ;
```

ЁЯСЙ ржПржЦрж╛ржирзЗ parameter `userEmail` ржжрж┐рзЯрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ user ржмрзЗрж░ ржХрж░рж╛ ржпрж╛ржмрзЗред

Call ржХрж░рж╛рж░ рж╕ржорзЯ:

```sql
CALL GetUserByEmail('test@example.com');
```

---

## ЁЯЦея╕П Example 3: Laravel ржерзЗржХрзЗ Stored Procedure Call

```php
use Illuminate\Support\Facades\DB;

// Simple Call
$users = DB::select('CALL GetAllUsers()');

// With Parameter
$user = DB::select('CALL GetUserByEmail(?)', ['test@example.com']);
```

---

## тЪЦя╕П Advantages (Merits)

* Query execution ржжрзНрж░рзБржд рж╣рзЯред
* Reuse ржХрж░рж╛ ржпрж╛рзЯред
* Complex logic database ржПрж░ ржнрзЗрждрж░ handle ржХрж░рж╛ ржпрж╛рзЯред
* Security ржнрж╛рж▓рзЛ рж╣рзЯ (parameterized call)ред

## тЪая╕П Disadvantages (Demerits)

* Application logic ржпржжрж┐ DB ржПрж░ ржнрзЗрждрж░рзЗ ржмрзЗрж╢рж┐ ржЪрж▓рзЗ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ maintain ржХрж░рж╛ ржХржарж┐ржи рж╣рзЯред
* Cross-platform portability ржХржорзЗ ржпрж╛рзЯ (MySQL procedure, Oracle procedure ржЖрж▓рж╛ржжрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ)ред
* Debugging complex рж╣рзЯред

---

## ЁЯПЖ Summary (ржмрж╛ржВрж▓рж╛рзЯ)

Stored Procedure рж╣рж▓рзЛ database ржПрж░ ржнрзЗрждрж░рзЗ ржПржХ ржзрж░ржирзЗрж░ **SQL function-like code**, ржпрзЗржЯрж╛ define ржХрж░рзЗ рж░рж╛ржЦрж▓рзЗ рж╢рзБржзрзБ call ржХрж░рж▓рзЗржЗ execute рж╣рзЯред
ржПржЯрж╛ performance, security, reusability рж╕ржмржжрж┐ржХ ржерзЗржХрзЗ ржЙржкржХрж╛рж░рзА, рждржмрзЗ overuse ржХрж░рж▓рзЗ maintain ржХрж░рж╛ ржХржарж┐ржи рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

---